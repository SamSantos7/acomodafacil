(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{1213:function(e,t,r){Promise.resolve().then(r.bind(r,441))},441:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return d}});var a=r(7437),s=r(2265),n=r(9376),i=r(9820),o=r(2381),c=r(3340);function d(){let[e,t]=(0,s.useState)([]),[r,d]=(0,s.useState)(!0),l=(0,n.useRouter)(),{toast:u}=(0,c.pm)();(0,s.useEffect)(()=>{(async()=>{try{let e=localStorage.getItem("token");if(!e){l.push("/");return}let r=await fetch("/api/reservations",{headers:{Authorization:"Bearer ".concat(e)}});if(!r.ok)throw Error("Falha ao buscar reservas");let a=await r.json();t(a.reservations)}catch(e){u({title:"Erro",description:"N\xe3o foi poss\xedvel carregar suas reservas",variant:"destructive"})}finally{d(!1)}})()},[l,u]);let f=async r=>{try{let a=localStorage.getItem("token");if(!a){l.push("/");return}if(!(await fetch("/api/reservations/".concat(r),{method:"PUT",headers:{Authorization:"Bearer ".concat(a),"Content-Type":"application/json"},body:JSON.stringify({status:"cancelled"})})).ok)throw Error("Falha ao cancelar reserva");t(e.map(e=>e.id===r?{...e,status:"cancelled"}:e)),u({title:"Sucesso",description:"Reserva cancelada com sucesso"})}catch(e){u({title:"Erro",description:"N\xe3o foi poss\xedvel cancelar a reserva",variant:"destructive"})}};return r?(0,a.jsx)("div",{className:"flex justify-center items-center h-screen",children:"Carregando..."}):(0,a.jsxs)("div",{className:"container mx-auto py-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold mb-6",children:"Meu Painel"}),(0,a.jsx)("div",{className:"grid gap-6",children:(0,a.jsxs)(i.Zb,{children:[(0,a.jsxs)(i.Ol,{children:[(0,a.jsx)(i.ll,{children:"Minhas Reservas"}),(0,a.jsx)(i.SZ,{children:"Gerencie suas reservas atuais e passadas"})]}),(0,a.jsx)(i.aY,{children:0===e.length?(0,a.jsx)("p",{className:"text-center py-4",children:"Voc\xea ainda n\xe3o tem reservas"}):(0,a.jsx)("div",{className:"space-y-4",children:e.map(e=>(0,a.jsx)("div",{className:"border p-4 rounded-lg",children:(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold",children:e.accommodation.name}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:[e.accommodation.city,", ",e.accommodation.country]}),(0,a.jsxs)("p",{className:"text-sm mt-2",children:[new Date(e.startDate).toLocaleDateString()," - ",new Date(e.endDate).toLocaleDateString()]}),(0,a.jsx)("span",{className:"inline-block px-2 py-1 text-xs rounded mt-2 ".concat("confirmed"===e.status?"bg-green-100 text-green-800":"pending"===e.status?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"),children:"confirmed"===e.status?"Confirmada":"pending"===e.status?"Pendente":"Cancelada"})]}),"cancelled"!==e.status&&(0,a.jsx)(o.z,{variant:"outline",size:"sm",onClick:()=>f(e.id),children:"Cancelar"})]})},e.id))})})]})})]})}},2381:function(e,t,r){"use strict";r.d(t,{z:function(){return d}});var a=r(7437),s=r(2265),n=r(7053),i=r(535),o=r(3448);let c=(0,i.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=s.forwardRef((e,t)=>{let{className:r,variant:s,size:i,asChild:d=!1,...l}=e,u=d?n.g7:"button";return(0,a.jsx)(u,{className:(0,o.cn)(c({variant:s,size:i,className:r})),ref:t,...l})});d.displayName="Button"},9820:function(e,t,r){"use strict";r.d(t,{Ol:function(){return o},SZ:function(){return d},Zb:function(){return i},aY:function(){return l},ll:function(){return c}});var a=r(7437),s=r(2265),n=r(3448);let i=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...s})});i.displayName="Card";let o=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",r),...s})});o.displayName="CardHeader";let c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("h3",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",r),...s})});c.displayName="CardTitle";let d=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("p",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",r),...s})});d.displayName="CardDescription";let l=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",r),...s})});l.displayName="CardContent",s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",r),...s})}).displayName="CardFooter"},3340:function(e,t,r){"use strict";r.d(t,{pm:function(){return f}});var a=r(2265);let s=0,n=new Map,i=e=>{if(n.has(e))return;let t=setTimeout(()=>{n.delete(e),l({type:"REMOVE_TOAST",toastId:e})},1e6);n.set(e,t)},o=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:r}=t;return r?i(r):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},c=[],d={toasts:[]};function l(e){d=o(d,e),c.forEach(e=>{e(d)})}function u(e){let{...t}=e,r=(s=(s+1)%Number.MAX_SAFE_INTEGER).toString(),a=()=>l({type:"DISMISS_TOAST",toastId:r});return l({type:"ADD_TOAST",toast:{...t,id:r,open:!0,onOpenChange:e=>{e||a()}}}),{id:r,dismiss:a,update:e=>l({type:"UPDATE_TOAST",toast:{...e,id:r}})}}function f(){let[e,t]=a.useState(d);return a.useEffect(()=>(c.push(t),()=>{let e=c.indexOf(t);e>-1&&c.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>l({type:"DISMISS_TOAST",toastId:e})}}},3448:function(e,t,r){"use strict";r.d(t,{cn:function(){return n}});var a=r(1994),s=r(3335);function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.m6)((0,a.W)(t))}}},function(e){e.O(0,[522,971,117,744],function(){return e(e.s=1213)}),_N_E=e.O()}]);